\qns{Filters}
\qcontributor{Son Tran}

One very common use for AC circuits is as a \emph{filter}.
Basically, a \emph{filter} is a circuit device that blocks some parts of frequencies.
The key idea behind filters is that of \emph{superposition}.
Recall, from EE16A, that in circuits consisting solely of sources and resistors, we can analyze the circuits by considering each independent source apart from the rest, then the final signal simply being the sum of all the intermediate responses from each of the sources.
\\
\\
With filters, rather than looking at the superposition of independent sources, we will look at the superposition if input signals at the same point but with different frequencies.
Let
\[
  V(\omega, \widetilde{X}) = \widetilde{X}e^{j \omega t} + \overline{\widetilde{X}}e^{-j \omega t}
.\]

Basically, $V(\omega, \widetilde{X})$ converts the signal with angular frequency $\omega$ represented by the phasor $\widetilde{X}$ from the frequency domain to the time domain.
Specifically, if we supply an input signal of the form
\[
  v_{in}(t) = \sum_i V(\omega_i, \widetilde{X_i})
.\]

to a circuit with transfer function $H(\omega)$, the output voltage will be
\[
  v_{out}(t) = \sum_i V(\omega_i, H(\omega_i)\widetilde{X_i})
.\]

The practical consequence of the above assertion is that we can treat the superposition of signals of two different frequencies as if the two signals were separate.
For instance, if we supplied an AC circuit acting as a low-pass filter with the superposition of a 60 Hz signal and a 100 Hz noise signal, the high-frequency noise would be attenuated independently of the low-frequency signal.
\\
\\
Now, we will consider various filter configurations, and study their behavior.



\begin{enumerate}



% Part(a)
\qitem Giving the following filter

\input{\bank/transfer/q_filters/fig_low_pass}

\begin{enumerate}
  \item Write out the transfer function $H(\omega)$.
  \item For values of $\omega$ approaches $0$, find $\abs{H(\omega)}$.
  \item For values of $\omega$ approaches $\infty$, find $\abs{H(\omega)}$.
\end{enumerate}

% Solution for part (a)
\sol{

\begin{enumerate}

  \item The circuit can be simplified as:

    \input{\bank/transfer/q_filters/fig_simplified_low_pass}

    We recognize the circuit is a voltage divider.
    Let $\widetilde{V}_{out}$ and $\widetilde{V}_{in}$ be voltage phasors.
    Using the voltage divider equation with impedance, we have
    \[
      \widetilde{V}_{out} = \frac{Z_C}{Z_R + Z_C}\widetilde{V}_{in} = H(\omega)\widetilde{V}_{in}
    .\]
    Notice that the above equation uses impedance and voltage phasors instead of resistance and voltage.
    From the above equation, the circuit has the transfer function
    \[
      H(\omega) = \frac{Z_C}{Z_R + Z_C}
      = \frac{\frac{1}{j\omega C}}{R + \frac{1}{j\omega C}}
      = \frac{1}{1 + j\omega RC}
      = \frac{1}{1 + j\frac{\omega}{\omega_p}}
    ,\]
    where $\omega_p = \frac{1}{RC} = \frac{1}{\tau} $ is known as the \emph{pole frequency}, and $\tau = RC$ is the \emph{time constant} of the $RC$ circuit.

  \item Using the polar representation of complex numbers, we can rewrite the transfer function
    \[
      H(\omega) = \frac{1}{1 + j\frac{\omega}{\omega_p}}
      = \frac{1e^{j0}}{r_pe^{j\theta_p}}
      = \frac{1}{r_p}e^{j(0 - \theta_p)}
      = \abs{H(\omega)}e^{j\angle{H(\omega)}}
    ,\]
    where $r_p = \abs{1 + j\frac{\omega}{\omega_p}} = \sqrt{1^{2} + (\frac{\omega}{\omega_p})^{2}}$.
    \\
    \\
    We have the following approximation for $r_p$ in term of $\omega$
    \[
      r_p \approx
      \begin{cases}
        1,      & \text{if } \omega \ll \omega_p \text{ \it i.e. } \omega \rightarrow 0 \\
        \infty, & \text{if } \omega \gg \omega_p \text{ \it i.e. } \omega \rightarrow \infty
      \end{cases}
    .\]
    From the polar form of the transfer function, we have $\abs{H(\omega)} = \frac{1}{r_p}$ and $\angle{H(\omega) = - \theta_p}$.
    \\
    \\
    Therefore, for values of $\omega$ approaches $0$, \ie{ $\omega \ll \omega_p$}, $\abs{H(\omega)}$ approaches $1$.
    In this case, $\widetilde{V}_{out} = \widetilde{V}_{in}$, it means that low frequencies can pass through this filter.

  \item For values of $\omega$ approaches $\infty$, \ie{ $\omega \gg \omega_p$}, $\abs{H(\omega)}$ approaches $0$.
    In this case, $\widetilde{V}_{out} = 0$, it means that high frequencies are blocked by this filter.
    \\
    \\
    Since this filter allows low frequencies to go through and blocks high frequencies, it is called a \emph{low-pass filter}.

\end{enumerate}
}



% Part(b)
\qitem Giving the following filter

\input{\bank/transfer/q_filters/fig_high_pass}

\begin{enumerate}
  \item Write out the transfer function $H(\omega)$.
  \item For values of $\omega$ approaches $0$, find $\abs{H(\omega)}$.
  \item For values of $\omega$ approaches $\infty$, find $\abs{H(\omega)}$.
\end{enumerate}

% Solution for part (b)
\sol{

\begin{enumerate}

  \item The transfer function $H(\omega)$.
    \\
    \\
    The circuit can be simplified as:

    \input{\bank/transfer/q_filters/fig_simplified_high_pass}

    Using the voltage divider equation with impedance, we have
    \[
      \widetilde{V}_{out} = \frac{Z_R}{Z_R + Z_C}\widetilde{V}_{in} = H(\omega)\widetilde{V}_{in}
    .\]

    Thus, the circuit has the transfer function

    \[
      H(\omega) = \frac{Z_R}{Z_R + Z_C}
      = \frac{R}{R + \frac{1}{j\omega C}}
      = \frac{j\omega RC}{1 + j\omega RC}
      = \frac{j\frac{\omega}{\omega_p}}{1 + j\frac{\omega}{\omega_p}}
    .\]

    with $\omega_p$ as defined earlier in part (a).

  \item Using the polar representation of complex numbers, we can rewrite the transfer function
    \[
      H(\omega) = \frac{j\frac{\omega}{\omega_p}}{1 + j\frac{\omega}{\omega_p}}
      = \frac{re^{j\frac{\pi}{2}}}{r_pe^{j\theta_p}}
      = \frac{r}{r_p}e^{j(\frac{\pi}{2} - \theta_p)}
      = \abs{H(\omega)}e^{j\angle{H(\omega)}}
    ,\]
    where $r = \sqrt{(\frac{\omega}{\omega_p})^{2}}$ and $r_p = \abs{1 + j\frac{\omega}{\omega_p}} = \sqrt{1^{2} + (\frac{\omega}{\omega_p})^{2}}$.
    \\
    \\
    We have the following approximation for $H(\omega) = \frac{r}{r_p} = \frac{\sqrt{(\frac{\omega}{\omega_p})^{2}}}{\sqrt{1^{2} + (\frac{\omega}{\omega_p})^{2}}}$
    \[
      H(\omega) \approx
      \begin{cases}
        0, & \text{if } \omega \ll \omega_p \text{ \it i.e. } \omega \rightarrow 0 \\
        1, & \text{if } \omega \gg \omega_p \text{ \it i.e. } \omega \rightarrow \infty
      \end{cases}
    .\]
    \\
    \\
    Therefore, for values of $\omega$ approaches $0$, $\abs{H(\omega)}$ approaches $0$.
    In this case, $\widetilde{V}_{out} = 0$, it means that low frequencies are blocked by this filter.

  \item For values of $\omega$ approaches $\infty$, $\abs{H(\omega)}$ approaches $1$.
    In this case, $\widetilde{V}_{out} = \widetilde{V}_{in}$, it means that high frequencies can pass through this filter.
    \\
    \\
    Since this filter allows high frequencies to go through and blocks low frequencies, it is called a \emph{high-pass filter}.

\end{enumerate}
}



% Part(c)
\qitem Giving the following filter

\input{\bank/transfer/q_filters/fig_band_pass}

\begin{enumerate}
  \item Write out the transfer function $H(\omega)$.
  \item For values of $\omega$ approaches $0$, find $\abs{H(\omega)}$.
  \item For values of $\omega$ approaches $\infty$, find $\abs{H(\omega)}$.
\end{enumerate}

% Solution for part (c)
\sol{

\begin{enumerate}

  \item The transfer function $H(\omega)$.
    \\
    \\
    The circuit can be simplified as:

    \input{\bank/transfer/q_filters/fig_simplified_band_pass}

    In this circuit, the op-amp acts as a unity gain buffer which connects the two filters together.
    On the left of the op-amp is a low-pass filter, and on the right of the op-amp is a high-pass filter.
    Let $H_1(\omega)$ and $H_2(\omega)$ be transfer functions for the low-pass and high-pass filters respectively.
    We can write $\widetilde{V}_{out}$ in terms of $H_1(\omega)$, $H_2(\omega)$, and $\widetilde{V}_{in}$
    \[
      \widetilde{V}_{out} = H_2(\omega)H_1(\omega)\widetilde{V}_{in}
    .\]

    Thus, the circuit has the transfer function

    \[
      H(\omega) = H_2(\omega)H_1(\omega)
    .\]


  \item Using the above transfer function, we have
    \[
      \abs{H(\omega)} = \abs{H_2(\omega)H_1(\omega)}
      = \abs{H_2(\omega)}\abs{H_1(\omega)}
    .\]
    Since $H_1(\omega)$ is a transfer function of a low-pass filter and $H_2(\omega)$ is a transfer function of a high-pass filter, for values of $\omega$ approaches $0$, $\abs{H(\omega)}$ approaches $0$.
    Therefore, $\widetilde{V}_{out} = 0$, it means that low frequencies are blocked by this filter.

  \item For values of $\omega$ approaches $\infty$, $\abs{H(\omega)}$ also approaches $0$.
    Therefore, $\widetilde{V}_{out} = 0$; it means that high frequencies are blocked by this filter.
    \\
    \\
    Since this filter blocks both low and high frequencies, and it allows signals of a certain frequency range (a band of frequencies) to pass through, it is called a \emph{band-pass filter}.

\end{enumerate}

}



\end{enumerate}

