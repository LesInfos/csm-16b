\qns{RC Circuit}
\qcontributor{Kyle Tanghe}
\qcontributor{Elena Jia}
\qcontributor{Ramsey Mardini}

Consider the circuit below, assume that when $t\leq0$, the capacitor has no charge stored $(V_{\text{c}}(t=0) = 0)$. 
At $t=0$, the switch closes. Assume that $V_s=\SI{5}{\volt}$, $R=\SI{100}{\ohm}$, and $C=\SI{10}{\micro\farad}$. 

\input{\bank/ode/figures/rc_circuit}

\begin{enumerate}

\qitem Write out the KCL equations associated with the circuit when the switch is closed.

\meta{
	Testing meta here
}

\sol{
\begin{align*}
\intertext{We denote the voltage to the left of resistor to be $y$. 
We obtain the following differential equations. KCL at node between the resistor and capacitor gives}
\frac{y - V_{\text{C}}}{R} = C\frac{dV_{\text{C}}}{dt} \\
\intertext{Additionally, KCL at the node between the resistor and voltage sources gives:}
\frac{V_{\text{S}} - V_{\text{C}}}{R} +  i_{\text{Vs}} = 0
\end{align*}
}



\qitem Write out the differential equation for $V_{\text{c}}(t)$ after the switch closes.

\sol{
\begin{align*}
\intertext{From the previous problem we know that when the switch is closed,}
\frac{V_{\text{S}}- V_{\text{C}}}{R} = C\frac{dV_{\text{C}}}{dt} \\
\intertext{Thus we obtain}
C\frac{dV_{\text{C}}}{dt} + \frac{V_{\text{C}}}{R} - \frac{V_{\text{S}}}{R}=0
\end{align*}
}

\qitem What is the initial condition for $V_{\text{c}}(t)$ (i.e. $V_{\text{c}}(t=0)$) and what is $V_{\text{c}}(t \to \infty)$?

\sol{
No charge is on the capacitor before time $t=0$. Using $q=VC$, we know that $V_{\text{c}}=\SI{0}{\volt}$ before $t=0$.
At $t=0$, the switch closes. Since voltage across the capacitor cannot change instantaneously, $V_{\text{c}}(t=0)=0.$
As $t$ goes to infinity, the capacitor will become fully charged and the current goes to zero. 
Therefore, the voltage of the capacitor equals the voltage source: $V_{\text{c}}(t \to \infty) = V_{\text{S}}.$
}

\qitem Using the initial conditions found in the previous parts, find an expression for 
$V_{\text{c}}(t)$ in terms of $V_{\text{s}}$, $R$, and $C$.

\textit{Hint 1: Remember the general solution to the equation $\frac{dy}{dt}=\alpha y$ is 
$y(t)=Ke^{\alpha t}$ where $K$ is a constant and $\alpha$ is the eigenvalue of the equation}.

\textit{Hint 2: Remember that the solution for a first order differential equation 
can be written as: $y(t) = y(\infty) + (y(0) - y(\infty)) e^{-\alpha t}$}.

\sol{
	In our case, we know:
	$$ C\frac{dV_{\text{c}}}{dt} + \frac{V_{\text{c}}}{R} - \frac{V_{\text{S}}}{R}=0 $$
	which can be written as
	$$\frac{dV_{\text{c}}}{dt} = - \frac{V_{\text{c}}}{RC} + \frac{V_{\text{S}}}{RC}$$
	From the hint, we know that $\alpha = -\frac{1}{RC}$. We also know that $V_c(0)= 0$ and $V_c = V_s$ from the previous parts.
	Therefore plugging in these values into hint 2, we get:
	$$V_c(t) = V_S + (0 - V_S) e^{-\frac{t}{RC}}$$
	$$V_c(t) = V_S(1 - e^{-\frac{t}{RC}})$$
	$$V_c(t) = V_S(1 - e^{-\frac{t}{\tau}}) \text{ where } \tau = RC \text{ ($\tau$ explained in next part)}$$
}

\end{enumerate}

Aside: $\tau$ is the time constant that we denote for RC circuits. 
Its definition is the time required to charge the capacitor from an initial voltage of zero to about $63.2\%$ of the value of $V_s$, 
or to discharge the capacitor to about $36.8\%$ of its initial charge voltage. For an RC circuit it is equal to $\frac{1}{\alpha}$ 
where $\alpha$ is the eigenvalue of the RC circuit.
\begin{figure}[!h]
  \centering
  \includegraphics[width=225px]{\bank/ode/figures/tau_curve.jpg}
  \caption{Different values of capacitor voltage at different times, relative to $\tau.$}
  \label{fig:Tau Curve for Charging RC Circuit}
\end{figure}

\begin{enumerate}[resume]
\qitem On what order of magnitude of time (nanoseconds, milliseconds, 10's of seconds, etc.) does this circuit settle 
($V_{\text{c}}$ is $>95\%$ of its value as $t \to \infty$)?

\sol{

The time constant $\tau$ of an RC circuit is just $\tau = RC$. For our circuit:
$$\tau = RC = \SI{100}{\ohm} \cdot \SI{10}{\micro\farad} = \SI{0.001}{\second} $$
After 3 time constants, the voltage will be $~95\%$ of its steady state value
$$3\tau = \SI{0.003}{\second}$$
The circuit will settle on the order of milliseconds.
Alternatively, this value can be found by using algebra:
$$0.95V_S = V_S(1 - e^{-\frac{t}{RC}}) $$
$$-0.05 = -e^{-\frac{t}{RC}} $$
$$0.05 = e^{-\frac{t}{RC}} $$
$$ln(0.05) = -\frac{t}{RC} $$
$$-3 = -\frac{t}{0.001} $$
$$t = 0.003 \, \text{seconds}$$
}

\qitem Give 2 ways to reduce the settling time of the circuit if we are allowed to change one component in the circuit.

\sol{

To reduce settling time, reduce $\tau$. We can achieve this by

\begin{enumerate}
\item Lowering the value of $R$ or
\item Lowering the value of $C$.
\end{enumerate}

Notice how the value of $V_{\text{s}}$ does not change the settling time.

}


\end{enumerate}
